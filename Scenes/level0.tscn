[gd_scene load_steps=21 format=2]

[ext_resource path="res://Scenes/Lobby.tscn" type="PackedScene" id=1]
[ext_resource path="res://Scripts/MapManager.gd" type="Script" id=2]
[ext_resource path="res://Scenes/Settings.tscn" type="PackedScene" id=3]
[ext_resource path="res://Textures/WorldEnv.tres" type="Environment" id=4]
[ext_resource path="res://Objects/VehicleManager.tscn" type="PackedScene" id=5]
[ext_resource path="res://Scripts/FloorFinder.gd" type="Script" id=6]
[ext_resource path="res://Scenes/Roles.tscn" type="PackedScene" id=7]
[ext_resource path="res://Scenes/GUI.tscn" type="PackedScene" id=8]
[ext_resource path="res://Scenes/FreeCam.tscn" type="PackedScene" id=9]
[ext_resource path="res://Scripts/Paint.gd" type="Script" id=10]
[ext_resource path="res://Scripts/gameRoot.gd" type="Script" id=13]
[ext_resource path="res://Scripts/NetworkManager.gd" type="Script" id=15]
[ext_resource path="res://Scripts/TerrainMMI.gd" type="Script" id=18]

[sub_resource type="OpenSimplexNoise" id=1]
octaves = 2
period = 256.0
persistence = 0.1

[sub_resource type="NoiseTexture" id=2]
width = 1000
height = 1000
seamless = true
noise = SubResource( 1 )

[sub_resource type="SpatialMaterial" id=3]
render_priority = -81
flags_transparent = true
flags_no_depth_test = true
albedo_color = Color( 0, 0, 0, 0.298039 )

[sub_resource type="SpatialMaterial" id=4]
render_priority = 127
flags_no_depth_test = true
params_point_size = 128.0
albedo_color = Color( 1, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=5]
flags_no_depth_test = true
flags_fixed_size = true

[sub_resource type="SphereMesh" id=6]
material = SubResource( 5 )
radius = 0.01
height = 0.02
radial_segments = 16
rings = 8

[sub_resource type="BoxShape" id=7]
extents = Vector3( 5, 5, 5 )

[node name="gameRoot" type="Node"]
script = ExtResource( 13 )

[node name="VehicleManager" parent="." instance=ExtResource( 5 )]

[node name="FloorFinder" type="Spatial" parent="VehicleManager"]
script = ExtResource( 6 )

[node name="RayCast" type="RayCast" parent="VehicleManager/FloorFinder"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 500, 0 )
cast_to = Vector3( 0, -1000, 0 )
collision_mask = 524288

[node name="Lobby" parent="." instance=ExtResource( 1 )]

[node name="NetworkManager" type="Node" parent="."]
script = ExtResource( 15 )

[node name="Settings" parent="." instance=ExtResource( 3 )]
layer = 3

[node name="Roles" parent="." instance=ExtResource( 7 )]

[node name="Map" type="Spatial" parent="."]
script = ExtResource( 2 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="Map"]
environment = ExtResource( 4 )

[node name="DirectionalLight" type="DirectionalLight" parent="Map"]
transform = Transform( 1, 0, 0, 0, 0.707107, 0.707106, 0, -0.707107, 0.707106, 0, 0, 0 )
light_indirect_energy = 0.33
light_cull_mask = 4294967293
shadow_enabled = true
shadow_reverse_cull_face = true
directional_shadow_max_distance = 1000.0

[node name="NoiseTexture" type="TextureRect" parent="Map"]
margin_left = -1055.62
margin_top = -44.4471
margin_right = -55.6216
margin_bottom = 955.553
texture = SubResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Locations" type="Node" parent="Map"]

[node name="Items" type="Node" parent="Map"]

[node name="TerrainMMI" type="Node" parent="Map"]
script = ExtResource( 18 )

[node name="Tiles" type="Node" parent="Map"]

[node name="Paint" type="Node" parent="Map"]
script = ExtResource( 10 )

[node name="FlatGeometry" type="ImmediateGeometry" parent="Map/Paint"]
visible = false
material_override = SubResource( 3 )

[node name="LineGeometry" type="ImmediateGeometry" parent="Map/Paint"]
material_override = SubResource( 4 )

[node name="ControlNode" type="MeshInstance" parent="Map/Paint"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -100, 0 )
visible = false
mesh = SubResource( 6 )
material/0 = null
__meta__ = {
"_editor_description_": "This should be obsolete, along with control nodes"
}

[node name="AreaHandle" type="StaticBody" parent="Map/Paint/ControlNode" groups=[
"area_handle",
]]
collision_layer = 262144
collision_mask = 0

[node name="CollisionShape" type="CollisionShape" parent="Map/Paint/ControlNode/AreaHandle"]
shape = SubResource( 7 )

[node name="ControlNodes" type="Node" parent="Map/Paint"]

[node name="ViewportContainer" type="ViewportContainer" parent="."]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -200.0
margin_bottom = 200.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="View" type="Viewport" parent="ViewportContainer"]
size = Vector2( 200, 200 )
own_world = true
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 3

[node name="GUI" parent="ViewportContainer/View" instance=ExtResource( 8 )]

[node name="Vehicles" type="Node" parent="."]

[node name="Players" type="Node" parent="Vehicles"]

[node name="Wheeled" type="Node" parent="Vehicles"]

[node name="Planes" type="Node" parent="Vehicles"]

[node name="Editor" parent="." instance=ExtResource( 9 )]
